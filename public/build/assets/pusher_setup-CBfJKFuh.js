import{P as w,E as c}from"./pusher-BoS8NtKK.js";import"./_commonjsHelpers-CqkleIqs.js";window.Pusher=w;window.Echo=new c({broadcaster:"pusher",key:"2458967c63940f50992a",cluster:"sa1",forceTLS:!0,authEndpoint:"/broadcasting/auth"});const i=new Set;window.subscribeToChats=d=>{d.forEach(a=>{i.has(a.id)||(window.Echo.private(`chat.${a.id}`).listen(".NewMessage",n=>{const e=n.messages,o={id:e.id,text:e.message,sender:e.client_message===0?"user":"contact",date:e.currentdate},t=d.findIndex(s=>s.id===e.conversation_id);if(t>-1){const s=d[t];s.messages.push(o),s.lastMessage=e.message,s.currentdate=e.currentdate,window.selectedChatId!==s.id&&(s.isUnread=!0);const[r]=d.splice(t,1);d.unshift(r),window.updateChatListDOM(),window.updateDocumentTitle()}window.replaceTempMessage&&window.replaceTempMessage(e)||window.addMessageToChat&&window.addMessageToChat(e)}),i.add(a.id))})};
